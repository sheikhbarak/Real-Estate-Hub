<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bidding War System Test - Real Estate Hub</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .test-container {
            max-width: 1000px;
            margin: 100px auto 50px;
            padding: 30px;
        }

        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .test-header h1 {
            color: var(--text-primary);
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .test-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border-color);
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section-title i {
            margin-right: 10px;
            color: var(--accent-color);
        }

        .test-property {
            display: flex;
            align-items: center;
            padding: 20px;
            background: var(--bg-secondary);
            border-radius: 12px;
            margin-bottom: 15px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
        }

        .test-property:hover {
            border-color: var(--accent-color);
            transform: translateY(-2px);
        }

        .property-image {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 20px;
        }

        .property-details {
            flex: 1;
        }

        .property-address {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .property-price {
            color: var(--accent-color);
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .property-stats {
            display: flex;
            gap: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .property-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }

        .like-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }

        .like-btn:hover {
            transform: scale(1.1);
        }

        .like-btn.liked {
            background: #e74c3c;
            color: white;
        }

        .competition-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .competition-badge.low {
            background: rgba(39, 174, 96, 0.1);
            color: #27ae60;
        }

        .competition-badge.medium {
            background: rgba(243, 156, 18, 0.1);
            color: #f39c12;
        }

        .competition-badge.high {
            background: rgba(231, 76, 60, 0.1);
            color: #e74c3c;
        }

        .test-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .test-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .test-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .test-btn.secondary {
            background: var(--gradient-secondary);
        }

        .test-btn.danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .status-display {
            background: var(--bg-tertiary);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-light);
        }

        .status-item:last-child {
            border-bottom: none;
        }

        .status-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .status-value {
            color: var(--text-primary);
            font-weight: 600;
        }

        .log-section {
            background: #1a1a1a;
            color: #00ff00;
            border-radius: 10px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 2px 0;
        }

        .log-timestamp {
            color: #888;
        }

        .log-info {
            color: #00ff00;
        }

        .log-warning {
            color: #ffaa00;
        }

        .log-error {
            color: #ff4444;
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            color: var(--accent-color);
            text-decoration: none;
            margin-bottom: 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            color: var(--text-primary);
        }

        .back-link i {
            margin-right: 8px;
        }

        @media (max-width: 768px) {
            .test-container {
                margin: 80px 20px 20px;
                padding: 20px;
            }

            .test-property {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .property-actions {
                flex-direction: row;
                width: 100%;
                justify-content: space-between;
            }

            .test-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Navigation -->
        <nav class="nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <h2>Real Estate Hub</h2>
                </div>
                <div class="nav-controls">
                    <button class="theme-toggle" onclick="toggleTheme()">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </nav>

        <div class="test-container">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                Back to Dashboard
            </a>

            <div class="test-header">
                <h1><i class="fas fa-vial"></i> Bidding War System Test</h1>
                <p>Test and demonstrate the bidding war warning functionality</p>
            </div>

            <!-- Test Properties -->
            <div class="test-section">
                <div class="section-title">
                    <i class="fas fa-home"></i>
                    Test Properties
                </div>

                <div class="test-property" data-property-id="test-001">
                    <svg class="property-image" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
                        <rect width="80" height="80" fill="#3498db"/>
                        <rect x="15" y="25" width="50" height="30" fill="#2c3e50"/>
                        <rect x="20" y="30" width="8" height="12" fill="#f39c12"/>
                        <rect x="32" y="30" width="8" height="12" fill="#f39c12"/>
                        <rect x="44" y="30" width="8" height="12" fill="#f39c12"/>
                        <rect x="56" y="30" width="8" height="12" fill="#f39c12"/>
                        <polygon points="15,25 40,10 65,25" fill="#e74c3c"/>
                        <rect x="35" y="42" width="10" height="13" fill="#8b4513"/>
                        <circle cx="42" cy="48" r="1" fill="#f1c40f"/>
                        <text x="40" y="70" text-anchor="middle" fill="white" font-size="8" font-family="Arial">House 1</text>
                    </svg>
                    <div class="property-details">
                        <div class="property-address">123 Sunset Boulevard, Beverly Hills, CA 90210</div>
                        <div class="property-price">$1,250,000</div>
                        <div class="property-stats">
                            <div class="stat">
                                <i class="fas fa-eye"></i>
                                <span id="views-001">0</span> views
                            </div>
                            <div class="stat">
                                <i class="fas fa-heart"></i>
                                <span id="likes-001">0</span> likes
                            </div>
                            <div class="stat">
                                <i class="fas fa-clock"></i>
                                <span>2 days ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="property-actions">
                        <button class="like-btn" onclick="toggleLike('test-001')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="competition-badge low" id="competition-001">Low Competition</div>
                    </div>
                </div>

                <div class="test-property" data-property-id="test-002">
                    <svg class="property-image" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
                        <rect width="80" height="80" fill="#1abc9c"/>
                        <rect x="10" y="20" width="60" height="35" fill="#34495e"/>
                        <rect x="15" y="25" width="10" height="15" fill="#3498db"/>
                        <rect x="30" y="25" width="10" height="15" fill="#3498db"/>
                        <rect x="45" y="25" width="10" height="15" fill="#3498db"/>
                        <rect x="60" y="25" width="5" height="15" fill="#3498db"/>
                        <polygon points="10,20 40,5 70,20" fill="#e67e22"/>
                        <rect x="35" y="40" width="10" height="15" fill="#8b4513"/>
                        <circle cx="42" cy="47" r="1" fill="#f1c40f"/>
                        <path d="M5,60 Q40,50 75,60 L75,75 L5,75 Z" fill="#3498db" opacity="0.7"/>
                        <text x="40" y="70" text-anchor="middle" fill="white" font-size="8" font-family="Arial">Ocean View</text>
                    </svg>
                    <div class="property-details">
                        <div class="property-address">456 Ocean Drive, Malibu, CA 90265</div>
                        <div class="property-price">$2,850,000</div>
                        <div class="property-stats">
                            <div class="stat">
                                <i class="fas fa-eye"></i>
                                <span id="views-002">0</span> views
                            </div>
                            <div class="stat">
                                <i class="fas fa-heart"></i>
                                <span id="likes-002">0</span> likes
                            </div>
                            <div class="stat">
                                <i class="fas fa-clock"></i>
                                <span>1 day ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="property-actions">
                        <button class="like-btn" onclick="toggleLike('test-002')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="competition-badge medium" id="competition-002">Medium Competition</div>
                    </div>
                </div>

                <div class="test-property" data-property-id="test-003">
                    <svg class="property-image" viewBox="0 0 80 80" xmlns="http://www.w3.org/2000/svg">
                        <rect width="80" height="80" fill="#9b59b6"/>
                        <rect x="5" y="15" width="70" height="40" fill="#2c3e50"/>
                        <rect x="10" y="20" width="12" height="18" fill="#f39c12"/>
                        <rect x="25" y="20" width="12" height="18" fill="#f39c12"/>
                        <rect x="40" y="20" width="12" height="18" fill="#f39c12"/>
                        <rect x="55" y="20" width="12" height="18" fill="#f39c12"/>
                        <polygon points="5,15 40,2 75,15" fill="#c0392b"/>
                        <rect x="35" y="38" width="10" height="17" fill="#8b4513"/>
                        <circle cx="42" cy="46" r="1" fill="#f1c40f"/>
                        <rect x="15" y="55" width="50" height="8" fill="#27ae60"/>
                        <circle cx="20" cy="62" r="3" fill="#2ecc71"/>
                        <circle cx="60" cy="62" r="3" fill="#2ecc71"/>
                        <text x="40" y="75" text-anchor="middle" fill="white" font-size="7" font-family="Arial">Mansion</text>
                    </svg>
                    <div class="property-details">
                        <div class="property-address">789 Hollywood Hills Drive, Los Angeles, CA 90028</div>
                        <div class="property-price">$3,500,000</div>
                        <div class="property-stats">
                            <div class="stat">
                                <i class="fas fa-eye"></i>
                                <span id="views-003">0</span> views
                            </div>
                            <div class="stat">
                                <i class="fas fa-heart"></i>
                                <span id="likes-003">0</span> likes
                            </div>
                            <div class="stat">
                                <i class="fas fa-clock"></i>
                                <span>3 hours ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="property-actions">
                        <button class="like-btn" onclick="toggleLike('test-003')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="competition-badge high" id="competition-003">High Competition</div>
                    </div>
                </div>
            </div>

            <!-- Test Controls -->
            <div class="test-section">
                <div class="section-title">
                    <i class="fas fa-cogs"></i>
                    Test Controls
                </div>

                <div class="test-controls">
                    <button class="test-btn" onclick="simulateViews()">
                        <i class="fas fa-eye"></i> Simulate Views
                    </button>
                    <button class="test-btn secondary" onclick="simulateLikes()">
                        <i class="fas fa-heart"></i> Simulate Likes
                    </button>
                    <button class="test-btn" onclick="triggerBiddingWarCheck()">
                        <i class="fas fa-fire"></i> Check for Bidding Wars
                    </button>
                    <button class="test-btn secondary" onclick="sendTestEmail()">
                        <i class="fas fa-envelope"></i> Send Test Email
                    </button>
                    <button class="test-btn danger" onclick="resetTestData()">
                        <i class="fas fa-trash"></i> Reset Test Data
                    </button>
                </div>

                <div class="status-display">
                    <div class="status-item">
                        <span class="status-label">Tracking System Status:</span>
                        <span class="status-value" id="trackingStatus">Initializing...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Email Service Status:</span>
                        <span class="status-value" id="emailStatus">Initializing...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Bidding War Detector Status:</span>
                        <span class="status-value" id="detectorStatus">Initializing...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Last Check:</span>
                        <span class="status-value" id="lastCheck">Never</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Notifications Sent:</span>
                        <span class="status-value" id="notificationCount">0</span>
                    </div>
                </div>
            </div>

            <!-- System Log -->
            <div class="test-section">
                <div class="section-title">
                    <i class="fas fa-terminal"></i>
                    System Log
                </div>
                <div class="log-section" id="systemLog">
                    <div class="log-entry log-info">
                        <span class="log-timestamp">[00:00:00]</span> System initializing...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="property-tracker.js"></script>
    <script src="bidding-war-detector.js"></script>
    <script src="email-service.js"></script>
    <script>
        // Initialize services
        let propertyTracker, biddingWarDetector, emailService;
        let notificationCount = 0;

        // Test properties data
        const testProperties = {
            'test-001': {
                address: '123 Sunset Boulevard, Beverly Hills, CA 90210',
                price: 1250000,
                bedrooms: 4,
                bathrooms: 3,
                sqft: 2800,
                image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzM0OThkYiIvPjx0ZXh0IHg9IjMwMCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIyNCIgZm9udC1mYW1pbHk9IkFyaWFsIj5MdXh1cnkgSG9tZSAxPC90ZXh0Pjwvc3ZnPg=='
            },
            'test-002': {
                address: '456 Ocean Drive, Malibu, CA 90265',
                price: 2850000,
                bedrooms: 5,
                bathrooms: 4,
                sqft: 3500,
                image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzFhYmM5YyIvPjx0ZXh0IHg9IjMwMCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIyNCIgZm9udC1mYW1pbHk9IkFyaWFsIj5PY2VhbiBWaWV3IEhvbWU8L3RleHQ+PC9zdmc+'
            },
            'test-003': {
                address: '789 Hollywood Hills Drive, Los Angeles, CA 90028',
                price: 3500000,
                bedrooms: 6,
                bathrooms: 5,
                sqft: 4200,
                image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iNjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iIzliNTliNiIvPjx0ZXh0IHg9IjMwMCIgeT0iMTAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIyNCIgZm9udC1mYW1pbHk9IkFyaWFsIj5Ib2xseXdvb2QgSGlsbHMgTWFuc2lvbjwvdGV4dD48L3N2Zz4='
            }
        };

        // Initialize system
        document.addEventListener('DOMContentLoaded', function() {
            initializeSystem();
        });

        async function initializeSystem() {
            try {
                log('Initializing property tracking system...', 'info');
                propertyTracker = new PropertyTracker();
                updateStatus('trackingStatus', 'Active');
                log('Property tracker initialized successfully', 'info');

                log('Initializing bidding war detector...', 'info');
                biddingWarDetector = new BiddingWarDetector();
                updateStatus('detectorStatus', 'Active');
                log('Bidding war detector initialized successfully', 'info');

                log('Initializing email service...', 'info');
                emailService = new EmailService();
                updateStatus('emailStatus', 'Active');
                log('Email service initialized successfully', 'info');

                log('System initialization complete!', 'info');
                
                // Load existing data
                loadTestData();
                
            } catch (error) {
                log(`Initialization error: ${error.message}`, 'error');
            }
        }

        function loadTestData() {
            Object.keys(testProperties).forEach(propertyId => {
                const trackingData = propertyTracker.getPropertyData(propertyId);
                if (trackingData) {
                    updatePropertyDisplay(propertyId, trackingData);
                }
            });
        }

        function updatePropertyDisplay(propertyId, data) {
            const viewsElement = document.getElementById(`views-${propertyId.split('-')[1]}`);
            const likesElement = document.getElementById(`likes-${propertyId.split('-')[1]}`);
            const competitionElement = document.getElementById(`competition-${propertyId.split('-')[1]}`);

            if (viewsElement) viewsElement.textContent = data.views || 0;
            if (likesElement) likesElement.textContent = data.likes || 0;
            
            if (competitionElement) {
                const level = data.competitionLevel || 'low';
                competitionElement.className = `competition-badge ${level}`;
                competitionElement.textContent = `${level.charAt(0).toUpperCase() + level.slice(1)} Competition`;
            }
        }

        function toggleLike(propertyId) {
            const likeBtn = document.querySelector(`[data-property-id="${propertyId}"] .like-btn`);
            const isLiked = propertyTracker.toggleLike(propertyId);
            
            if (isLiked) {
                likeBtn.classList.add('liked');
                likeBtn.innerHTML = '<i class="fas fa-heart"></i>';
                log(`Property ${propertyId} liked`, 'info');
            } else {
                likeBtn.classList.remove('liked');
                likeBtn.innerHTML = '<i class="far fa-heart"></i>';
                log(`Property ${propertyId} unliked`, 'info');
            }

            // Update display
            const data = propertyTracker.getPropertyData(propertyId);
            updatePropertyDisplay(propertyId, data);
        }

        function simulateViews() {
            Object.keys(testProperties).forEach(propertyId => {
                const randomViews = Math.floor(Math.random() * 20) + 5;
                for (let i = 0; i < randomViews; i++) {
                    propertyTracker.trackView(propertyId);
                }
                
                const data = propertyTracker.getPropertyData(propertyId);
                updatePropertyDisplay(propertyId, data);
            });
            
            log('Simulated random views for all properties', 'info');
        }

        function simulateLikes() {
            Object.keys(testProperties).forEach(propertyId => {
                const randomLikes = Math.floor(Math.random() * 10) + 2;
                for (let i = 0; i < randomLikes; i++) {
                    propertyTracker.trackLike(propertyId);
                }
                
                const data = propertyTracker.getPropertyData(propertyId);
                updatePropertyDisplay(propertyId, data);
            });
            
            log('Simulated random likes for all properties', 'info');
        }

        async function triggerBiddingWarCheck() {
            log('Starting bidding war analysis...', 'info');
            updateStatus('lastCheck', new Date().toLocaleTimeString());

            const likedProperties = propertyTracker.getUserLikedProperties();
            
            if (likedProperties.length === 0) {
                log('No liked properties to check', 'warning');
                return;
            }

            for (const propertyId of likedProperties) {
                try {
                    log(`Analyzing property ${propertyId}...`, 'info');
                    const result = await biddingWarDetector.analyzeProperty(propertyId);
                    
                    if (result.shouldNotify) {
                        log(`Bidding war detected for ${propertyId}! Level: ${result.warningData.warningLevel}`, 'warning');
                        showBiddingWarNotification(result);
                        notificationCount++;
                        updateStatus('notificationCount', notificationCount);
                    } else {
                        log(`No bidding war detected for ${propertyId}`, 'info');
                    }
                } catch (error) {
                    log(`Error analyzing ${propertyId}: ${error.message}`, 'error');
                }
            }
        }

        async function sendTestEmail() {
            const testEmail = 'test@example.com'; // Replace with actual email for testing
            const testProperty = testProperties['test-001'];
            const testWarningData = {
                views24h: 45,
                totalLikes: 12,
                similarSold: 4,
                competitionLevel: 'high',
                warningLevel: 'high'
            };

            try {
                log('Sending test email...', 'info');
                await emailService.sendBiddingWarWarning(testEmail, testProperty, testWarningData);
                log('Test email sent successfully!', 'info');
            } catch (error) {
                log(`Email sending failed: ${error.message}`, 'error');
            }
        }

        function resetTestData() {
            if (confirm('Are you sure you want to reset all test data?')) {
                localStorage.removeItem('propertyTrackingData');
                localStorage.removeItem('likedProperties');
                localStorage.removeItem('viewedProperties');
                localStorage.removeItem('notificationHistory');
                
                // Reset displays
                Object.keys(testProperties).forEach(propertyId => {
                    updatePropertyDisplay(propertyId, { views: 0, likes: 0, competitionLevel: 'low' });
                    
                    // Reset like buttons
                    const likeBtn = document.querySelector(`[data-property-id="${propertyId}"] .like-btn`);
                    likeBtn.classList.remove('liked');
                    likeBtn.innerHTML = '<i class="far fa-heart"></i>';
                });
                
                notificationCount = 0;
                updateStatus('notificationCount', 0);
                updateStatus('lastCheck', 'Never');
                
                log('Test data reset successfully', 'info');
            }
        }

        function showBiddingWarNotification(result) {
            const notification = document.createElement('div');
            notification.className = 'bidding-war-notification';
            notification.innerHTML = `
                <div class="notification-content">
                    <div class="notification-icon">
                        <i class="fas fa-fire"></i>
                    </div>
                    <div class="notification-text">
                        <h4>Bidding War Alert!</h4>
                        <p>${result.property.address} is receiving high interest</p>
                        <small>${result.warningData.views24h} views in 24h â€¢ ${result.warningData.totalLikes} likes</small>
                    </div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;

            // Add notification styles if not already added
            if (!document.querySelector('#notification-styles')) {
                const styles = document.createElement('style');
                styles.id = 'notification-styles';
                styles.textContent = `
                    .bidding-war-notification {
                        position: fixed;
                        top: 100px;
                        right: 20px;
                        background: var(--card-bg);
                        border: 2px solid #e74c3c;
                        border-radius: 12px;
                        padding: 20px;
                        box-shadow: var(--shadow-lg);
                        z-index: 1000;
                        max-width: 350px;
                        animation: slideIn 0.3s ease;
                    }

                    .notification-content {
                        display: flex;
                        align-items: flex-start;
                        gap: 15px;
                    }

                    .notification-icon {
                        width: 40px;
                        height: 40px;
                        background: linear-gradient(135deg, #ff6b6b, #ee5a24);
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: white;
                        font-size: 1.2rem;
                    }

                    .notification-text h4 {
                        margin: 0 0 5px 0;
                        color: var(--text-primary);
                        font-size: 1.1rem;
                    }

                    .notification-text p {
                        margin: 0 0 5px 0;
                        color: var(--text-secondary);
                        font-size: 0.9rem;
                    }

                    .notification-text small {
                        color: var(--text-secondary);
                        font-size: 0.8rem;
                    }

                    .notification-close {
                        background: none;
                        border: none;
                        color: var(--text-secondary);
                        cursor: pointer;
                        padding: 5px;
                        margin-left: auto;
                    }

                    @keyframes slideIn {
                        from {
                            transform: translateX(100%);
                            opacity: 0;
                        }
                        to {
                            transform: translateX(0);
                            opacity: 1;
                        }
                    }
                `;
                document.head.appendChild(styles);
            }

            document.body.appendChild(notification);

            // Auto-remove after 10 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 10000);
        }

        function updateStatus(elementId, value) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = value;
            }
        }

        function log(message, type = 'info') {
            const logContainer = document.getElementById('systemLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `<span class="log-timestamp">[${timestamp}]</span> ${message}`;
            
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
            
            console.log(`[${timestamp}] ${message}`);
        }

        // Theme toggle function
        function toggleTheme() {
            document.body.classList.toggle('dark-theme');
            const isDark = document.body.classList.contains('dark-theme');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            
            const themeIcon = document.querySelector('.theme-toggle i');
            themeIcon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
        }

        // Load saved theme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-theme');
            document.querySelector('.theme-toggle i').className = 'fas fa-sun';
        }
    </script>
</body>
</html>